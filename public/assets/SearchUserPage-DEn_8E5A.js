import{u as p,b as m,j as s,N as f,T as g,U as v,V as w,r as u,W as N,Y as x,E as b,Z as U,L as y}from"./index-BBlMiJUd.js";import{u as C}from"./useToast-XQdV5Y45.js";const S=({user:c})=>{if(!c)return null;const{userData:a,avatarUrl:i,displayName:o}=c,r=p(),t=m(e=>e.userReducer.user),l=t?.userId?._id===a?._id,n=m(e=>e.FollowReducer.isFollowingMap[a?._id]),{toast:d}=C(),h=l?"/Profile":`/other/profile/${a?._id}`;return s.jsxs(f,{to:h,className:"search-user-card",children:[s.jsx("img",{src:i,alt:o||"User Avatar",className:"user-avatar"}),s.jsxs("div",{className:"user-info",children:[s.jsx("h4",{className:"display-name",children:o}),s.jsxs("p",{className:"username",children:["@",a?.username]})]}),!l&&s.jsx("div",{className:"follow-action",onClick:e=>e.preventDefault(),children:n?s.jsx("button",{className:"btn btn-secondary",onClick:()=>{if(!t){d.error("Please login to unfollow users.");return}r(g(a?._id))},children:"Unfollow"}):s.jsx("button",{className:"btn btn-primary",onClick:()=>{if(!t){d.error("Please login to follow users.");return}r(v(a?._id))},children:"Follow"})})]})},_=()=>{const{results:c,query:a,loading:i,error:o}=m(e=>e.searchReducer),[r,t]=u.useState(a||""),l=p(),n=u.useCallback(()=>{r.trim()?l(N(r)):l(x())},[r,l]);u.useEffect(()=>{const e=setTimeout(n,400);return()=>clearTimeout(e)},[n]);const d=()=>{l(x()),t("")},h=u.useMemo(()=>c?.map((e,j)=>s.jsx(S,{user:e},e._id||j)),[c]);return s.jsxs("div",{className:"search-user-page",style:{position:"relative"},children:[s.jsxs("div",{className:"search-bar",children:[s.jsx("div",{className:"search-icon",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:s.jsx("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"})})}),s.jsx("input",{type:"text",placeholder:"Search",value:r,onChange:e=>t(e.target.value)}),r&&s.jsx("button",{className:"clear-btn",onClick:d,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:s.jsx("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"})})})]}),o&&s.jsx(b,{message:o,loading:i,clearAction:U,isvisible:!0}),s.jsxs("div",{className:"tabs",children:[s.jsx("a",{href:"#",className:"active",children:"Top"}),s.jsx("a",{href:"#",children:"Users"})]}),i&&s.jsx(y,{}),s.jsx("div",{className:"user-grid",children:h})]})},L=w.memo(_);export{L as default};
