import{w as x,b as t,u as j,a as _,r as g,a3 as n,a4 as N,a5 as b,a6 as v,j as e,L as w,G as y,T as P,U as C,M as k,E as I,a7 as U}from"./index-BBlMiJUd.js";import{U as F}from"./UserPostCard-DjPhxVP1.js";import{u as E}from"./useToast-XQdV5Y45.js";const T=()=>{const{id:r}=x();console.log(r);const{user:s,posts:c,profileLoading:u,postsLoading:f,profileError:d}=t(a=>a.OtherProfileReducer);console.log(s);const i=t(a=>a.userReducer.user),m=t(a=>a.FollowReducer.isFollowingMap),l=j(),{toast:p}=E(),o=_();if(g.useEffect(()=>{if(i?.userId?._id===r){o("/Profile",{replace:!0});return}l(n(r));let a=setTimeout(()=>{l(N(r))},500);return l(b(r)),()=>{l(v()),clearTimeout(a)}},[r,l,i,o]),u)return e.jsx(w,{});if(s)return e.jsxs("div",{className:"profile",children:[e.jsxs("div",{className:"profile__nav",children:[e.jsx("div",{className:"profile__back-btn",onClick:()=>o(-1),children:e.jsx(y,{size:30})}),e.jsx("h2",{className:"profile__username",children:s?.displayName}),i?.userId?._id!==s?.userId&&e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[m[r]?e.jsx("button",{style:{backgroundColor:"#244f65ff"},className:"btn btn-secondary",onClick:()=>{if(!i){p.error("Please login to unfollow users.");return}l(P(r)).then(()=>l(n(r)))},children:"Unfollow"}):e.jsx("button",{className:"btn btn-primary",onClick:()=>{if(!i){p.error("Please login to follow users.");return}l(C(r)).then(()=>l(n(r)))},children:"Follow"}),e.jsx("button",{className:"btn btn-icon",title:"Message",style:{background:"none",border:"none",padding:0,cursor:"pointer"},onClick:()=>o(`/chat/${s?.userId}`),children:e.jsx(k,{size:28})})]})]}),d&&e.jsx(I,{message:d,clearAction:U,isvisible:!0}),e.jsxs("div",{className:"info_wrapper",children:[e.jsxs("div",{className:"profile__info",children:[e.jsx("div",{className:"profile__avatar",style:{backgroundImage:`url(${s?.avatarUrl})`}}),e.jsxs("div",{className:"user_info",children:[e.jsx("p",{className:"profile__name",children:s?.displayName}),e.jsx("p",{className:"profile__role",children:s?.userId?.username}),e.jsx("p",{className:"profile__joined",children:"Joined 2021"})]})]}),e.jsxs("div",{className:"profile__stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("p",{className:"stat__number",children:s?.followersCount}),e.jsx("p",{className:"stat__label",onClick:()=>o(`/profile/${s?.userId}/followers`),style:{cursor:"pointer"},children:"Followers"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("p",{className:"stat__number",children:s?.followingCount}),e.jsx("p",{className:"stat__label",onClick:()=>o(`/profile/${s?.userId}/following`),style:{cursor:"pointer"},children:"Following"})]})]}),e.jsx("p",{className:"profile__bio",children:s?.bio}),e.jsx("div",{className:"profile__tabs",children:e.jsx("a",{href:"#",className:"active",children:"Posts"})}),f?e.jsx("div",{style:{flex:"1",padding:"4rem 1rem",textAlign:"center"},children:e.jsx("p",{children:"Posts Fetching..."})}):c?.length>0?e.jsx("div",{className:"profile__posts",children:c.map((a,h)=>e.jsx(F,{post:a},h))}):e.jsx("p",{style:{width:"100%",padding:"4rem 1rem",textAlign:"center"},children:"No posts yet."})]})]})};export{T as default};
