import{v as c,b as v,u as y,a as k,r as i,D as C,F as f,j as s,L as w,G as E,X as L,E as P,I as M,J as I,g as S,K as U}from"./index-DObBNmzj.js";import{U as R}from"./UserPostCard-CiKrh62V.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],F=c("ellipsis-vertical",$);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],B=c("log-out",H);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],z=c("square-pen",q),V=()=>{const{user:e,posts:d,profileLoading:p,profileError:x,postsLoading:h,successMessage:l}=v(r=>r.userReducer),a=y(),o=k(),[t,u]=i.useState(!1),[_,n]=i.useState(!1),m=()=>{u(r=>!r)};i.useEffect(()=>{!e&&!l&&a(C())},[a,e,l]),i.useEffect(()=>{e&&!l&&setTimeout(()=>{a(f(e?.userId?._id))},500)},[e,l,a]);const j=()=>{o("/Edit-user-profile")},g=()=>{a(M()).then(()=>{a(I()),a(S()),o("/login"),U.disconnect()}).finally(()=>n(!1))},N=()=>{o(-1)};return p?s.jsx(w,{}):s.jsxs("div",{className:"profile",children:[s.jsxs("div",{className:"profile__nav",children:[s.jsx("div",{className:"profile__back-btn",children:s.jsx(E,{size:30,onClick:N})}),s.jsx("h2",{className:"profile__username",children:e?.displayName}),s.jsxs("span",{className:"dots",onClick:m,children:[!t&&s.jsx(F,{}),t&&s.jsx(L,{className:"profile__close-btn"})]}),t&&s.jsxs("div",{className:"profile__menu",children:[s.jsxs("span",{onClick:j,className:"profile__edit",children:[s.jsx(z,{className:"profile__edit-btn"}),"Edit"]}),s.jsxs("button",{onClick:()=>n(!0),children:[" ",s.jsx(B,{})," Logout"]})]}),_&&s.jsxs("div",{style:{position:"absolute",top:"60px",right:"12px",background:"rgba(32,32,32,0.95)",color:"#fff",border:"1px solid rgba(255,255,255,0.15)",borderRadius:"10px",padding:"12px",minWidth:"220px",boxShadow:"0 8px 24px rgba(0,0,0,0.35)"},children:[s.jsx("div",{style:{marginBottom:"10px",fontWeight:600},children:"Logout?"}),s.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[s.jsx("button",{onClick:()=>n(!1),style:{background:"transparent",color:"#d1d5db",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",padding:"6px 10px",cursor:"pointer"},children:"No"}),s.jsx("button",{onClick:g,style:{background:"#ef4444",color:"#fff",border:"none",borderRadius:"8px",padding:"6px 10px",cursor:"pointer"},children:"Yes"})]})]})]}),x&&s.jsx(P,{message:x,action:()=>a(f(e._id)),loading:p}),s.jsxs("div",{className:"info_wrapper",children:[s.jsxs("div",{className:"profile__info",children:[s.jsx("div",{className:"profile__avatar",style:{backgroundImage:`url(${e?.avatarUrl})`}}),s.jsxs("div",{className:"user_info",children:[s.jsx("p",{className:"profile__name",children:e?.displayName}),s.jsx("p",{className:"profile__role",children:e?.userId?.username}),s.jsx("p",{className:"profile__joined",children:"Joined 2021"})]})]}),s.jsxs("div",{className:"profile__stats",children:[s.jsxs("div",{className:"stat",children:[s.jsx("p",{className:"stat__number",children:e?.followersCount}),s.jsx("p",{className:"stat__label",onClick:()=>o(`/profile/${e?.userId?._id}/followers`),style:{cursor:"pointer"},children:"Followers"})]}),s.jsxs("div",{className:"stat",children:[s.jsx("p",{className:"stat__number",children:e?.followingCount}),s.jsx("p",{className:"stat__label",onClick:()=>o(`/profile/${e?.userId?._id}/following`),style:{cursor:"pointer"},children:"Following"})]})]}),s.jsx("p",{className:"profile__bio",children:e?.bio}),s.jsx("div",{className:"profile__tabs",children:s.jsx("a",{href:"#",className:"active",children:"Posts"})}),h?s.jsx("div",{className:"profile__loading-text",children:s.jsx("p",{children:"Posts Fetching..."})}):d?.length>0?s.jsx("div",{className:"profile__posts",children:d.map((r,b)=>s.jsx(R,{post:r},b))}):s.jsx("p",{className:"profile__no-posts",children:"No posts yet."})]})]})};export{V as default};
