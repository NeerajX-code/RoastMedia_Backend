import{u as v,a as b,b as p,r as j,j as s,_ as y,$ as N,a0 as k}from"./index-DObBNmzj.js";const w=()=>{const i=v(),o=b(),{items:c,loading:l}=p(t=>t.NotificationReducer),h=p(t=>t.userReducer.user),g=t=>{if(!t)return"";const e=new Date(t),n=String(e.getDate()).padStart(2,"0"),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][e.getMonth()]||"";return`${n} ${r}`},f=t=>{if(!t)return"";const e=new Date(t);let n=e.getHours();const a=String(e.getMinutes()).padStart(2,"0"),r=n>=12?"PM":"AM";return n=n%12,n=n||12,`${n}:${a} ${r}`};j.useEffect(()=>{const t=async()=>{await i(y()),document.visibilityState==="visible"&&await i(N()),await i(k())};t();const e=setInterval(t,1e4),n=()=>{t()},a=()=>{document.visibilityState==="visible"&&t()};return window.addEventListener("focus",n),document.addEventListener("visibilitychange",a),()=>{clearInterval(e),window.removeEventListener("focus",n),document.removeEventListener("visibilitychange",a)}},[i]);const d=t=>{if(!t)return;const e=h?.userId?._id;o(e&&t===e?"/Profile":`/other/profile/${t}`)},u=t=>{t&&o(`/Single-post/${t}`)},m=t=>{t&&o(`/Comments/${t}`)},x=t=>t.map(e=>s.jsxs("div",{className:"notification-item",role:"button",onClick:()=>e?.type==="comment"?m(e?.post?._id):u(e?.post?._id),children:[s.jsx("div",{className:"avatar",onClick:n=>{n.stopPropagation(),d(e?.actor?._id)},style:{backgroundImage:`url(${e?.actorProfile?.avatarUrl||`https://api.dicebear.com/7.x/initials/svg?seed=${e?.actor?.username||"U"}`})`}}),s.jsxs("div",{className:"content",children:[s.jsxs("p",{className:"text",children:[s.jsxs("strong",{className:"actor",onClick:n=>{n.stopPropagation(),d(e?.actor?._id)},children:["@",e?.actor?.username]})," ",e.type==="like"?"liked your post":"commented on your post",e.type==="comment"&&e?.comment?.comment&&s.jsxs(s.Fragment,{children:[": ",s.jsx("span",{className:"comment-text",children:e.comment.comment})]})]}),s.jsxs("p",{className:"time",children:[g(e.createdAt)," Â· ",f(e.createdAt)]})]}),e?.post?.image&&s.jsx("div",{className:"thumb","aria-label":"post thumbnail",onClick:n=>{n.stopPropagation(),e?.type==="comment"?m(e?.post?._id):u(e?.post?._id)},style:{backgroundImage:`url(${e?.post?.image})`,width:"50px",height:"50px",backgroundSize:"cover",backgroundPosition:"center"}})]},e?._id||`${e?.actor?._id}-${e?.post?._id}-${e?.type}-${e?.createdAt}`));return s.jsxs("div",{className:"notification-page",children:[s.jsxs("div",{className:"header",children:[s.jsx("button",{onClick:()=>o(-1),className:"back-btn","aria-label":"Go back",style:{background:"none",border:"none",color:"white",outline:"none",cursor:"pointer"},children:s.jsx("i",{className:"ri-arrow-left-line",style:{fontSize:"24px",color:"white"}})}),s.jsx("h2",{children:"Notifications"})]}),c?.length?s.jsxs(s.Fragment,{children:[x(c),l&&s.jsx("p",{style:{padding:8,opacity:.7,fontSize:12},children:"Refreshingâ€¦"})]}):l?s.jsx("p",{style:{padding:16},children:"Loading..."}):s.jsxs("div",{className:"notifications-empty",children:[s.jsx("div",{className:"empty-emoji","aria-hidden":!0,children:"ðŸ””"}),s.jsx("h3",{children:"You're all caught up"}),s.jsx("p",{children:"Likes and comments will show up here."})]})]})};export{w as default};
