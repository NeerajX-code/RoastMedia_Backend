import{v as g,w as x,u as j,a as f,b as l,r as v,x as w,j as e,L as k,H as C,y as N,M as b,z as P,B as y,A as S,C as _}from"./index-DObBNmzj.js";import{u as D}from"./useToast-DTqp6ejy.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],I=g("forward",L);function H(){const{id:o}=x(),t=j(),n=f(),{singlePostDetails:c,singlePostLoading:d}=l(a=>a.PostDetailsReducer),i=l(a=>a.userReducer.user),{toast:r}=D(),s=c?.post;v.useEffect(()=>{o&&t(w(o))},[t,o]);const h=i?.userId?._id&&s?.userData?.userId?i?.userId._id===s?.userData?.userId:!1,u=async()=>{try{await t(_(o)),r.success("Post deleted"),n("/Profile")}catch(a){r.error(a?.message||"Not authorized to delete this post")}};return d?e.jsx(k,{}):e.jsxs("div",{className:"single-post",children:[e.jsxs("header",{className:"header",children:[e.jsx("button",{className:"back-btn",onClick:()=>n(-1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"})})}),h&&e.jsx("button",{className:"delete_post",onClick:u,children:"Delete Post"})]}),e.jsxs("div",{className:"profile-content",children:[e.jsx("div",{className:"image-wrapper",children:e.jsx("img",{src:s?.image,alt:"post",className:"post-img"})}),e.jsxs("div",{className:"post-details",children:[e.jsx("p",{className:"caption",children:s?.caption}),e.jsxs("div",{className:"user-info",children:[e.jsx("img",{src:s?.userData?.avatarUrl,alt:"user",className:"user-avatar"}),e.jsx("div",{children:e.jsx("h4",{className:"username",children:s?.userData?.displayName})})]})]})]}),e.jsxs("div",{className:"actions",children:[e.jsxs("button",{onClick:()=>{if(!i){r.error("Please login to like posts.");return}t(N(s?._id))},"aria-pressed":s?.isLiked,children:[e.jsx(C,{fill:s?.isLiked?"#e0245e":"none",stroke:s?.isLiked?"#e0245e":"currentColor"}),e.jsx("span",{children:s?.likesCount||0})]}),e.jsxs("button",{onClick:()=>{if(!i){r.error("Please login to comment.");return}n(`/Comments/${s?._id}`)},children:[e.jsx(b,{}),e.jsx("span",{children:s?.commentCount||0})]}),e.jsxs("button",{onClick:async()=>{t(P(s?._id));const a=`${window.location.origin}/Single-post/${s?._id}`,p=`
                            <a href="${a}" target="_blank">
                           i <strong>Check this Post!</strong><br/>
                            <img src={${s.image}} width="200"/>
                            <p>{${s.caption.replace(/[*"]+/g,"")}}</p>
                            </a>`;try{await navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([a],{type:"text/plain"}),"text/html":new Blob([p],{type:"text/html"})})]),alert("Rich content copied to clipboard!")}catch(m){console.error("Failed:",m)}},children:[e.jsx(I,{}),e.jsx("span",{children:s?.shareCount||0})]}),e.jsx("button",{onClick:()=>{if(!i){r.error("Please login to save posts.");return}t(S(s?._id))},"aria-pressed":s?.isSaved,children:e.jsx(y,{fill:s?.isSaved?"currentColor":"none"})})]})]})}export{H as default};
